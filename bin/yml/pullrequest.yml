base_task:
  variables:
    backlog_bin: '{{arg1}}'
    command: 'pullrequests'
    refresh_all: ''
  source: '{{backlog_bin}} {{command}} {{refresh_all}} 2>/dev/null | {{yml_dir}}/../one_line_pullrequest.py'
  delimiter: ':'
  binds:
    alt-o:
      - 'execute-silent[open $({{backlog_bin}} pullrequest-urls {+1,2,3})]'
  options:
    - with-nth=2..
    - ansi
    - reverse
    - tac
    - multi
    - 'query=!:Closed: !:Merged: '
    - no-sort
  post_operations:
    enter:
      - pipe: awk -F ':' '{print $3,$6}' | tee >(pbcopy)
task_switch:
  f5:
    variables:
      refresh_all: '--refresh-all'
  alt-a:
    variables:
      command: 'pullrequests-across-projects'
